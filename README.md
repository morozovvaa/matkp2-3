# Практическая работа 2: Базовая 2D-игра «Инопланетное вторжение» с использованием Pygame
## Цель работы: Разработать игру «Инопланетное вторжение», в которой игрок управляет кораблём и должен уничтожить флот инопланетян. Работа позволит вам познакомиться с основами разработки игр на Python с помощью библиотеки pygame и позволит применить эти знания о компьютерной графике, анимации и управлении событиями в дальнейшем

### 1. Настройка окружения  
Для работы игры был использован модуль pygame для создания графического интерфейса и реализации основных игровых механик. Установка библиотеки осуществляется через команду:

```
pip install pygame
```

### 2. Создание игрового окна  
Игровое окно создаётся с помощью метода pygame.display.set_mode(), где задаются размеры экрана и параметры фона.  
- Размер экрана настраивается через объект ai_settings, в котором задаются ширина и высота.  
- Цвет фона определяется в формате RGB с использованием параметра ai_settings.bg_color.

Экран обновляется в каждом цикле игры, что обеспечивает плавную анимацию.

### 3. Разработка основного цикла игры
Главный цикл игры реализован с помощью while True, который управляет всеми событиями игры и обновлением экрана. В этом цикле:
- Обрабатываются события (например, движение корабля и стрельба).
- Обновляется положение объектов на экране (корабль, пули, пришельцы).
- Вызываются функции для проверки столкновений (пули с пришельцами, корабль с пришельцами).
Каждый цикл перерисовывает экран для отображения актуального состояния игры

### 4. Создание класса Ship (Корабль)
Класс Ship реализует объект, управляющийся пользователем — корабль. Для этого:

- В классе задается стартовая позиция корабля в центре нижней части экрана.
- Реализовано движение корабля вправо и влево с помощью изменения координат на экране, управляемое клавишами стрелок.
- Позиция обновляется каждый раз, когда в цикле игры проверяется состояние клавиш.
- Реализована логика для управления движением в пределах экрана.

### 5. Добавление стрельбы
Для реализации стрельбы был создан класс Bullet, который представляет пулю, выстреливаемую из корабля. В нем:

- Пуля создается при нажатии на пробел и движется вверх.
- Каждая пуля обновляется с каждым кадром (передвижение вверх).
- Если пуля выходит за пределы экрана, она удаляется из группы.

### 6. Генерация пришельцев
Пришельцы создаются с помощью функции create_alien и располагаются в ряды на экране, заполняя пространство. Каждый пришелец является объектом класса Alien, который обновляется с каждой итерацией цикла игры. Если пришелец достигнет края экрана, флот изменит направление.

Флот пришельцев обновляется по мере того, как игрок уничтожает их. Количество пришельцев в ряду и ряду зависит от размера экрана и размеров самих пришельцев, что позволяет гибко регулировать сложность игры.

### 7. Добавление конца игры и ограничения:
- Добавлена систему жизней для игрока: при столкновении с инопланетянином или достижении нижней границы игрок теряет корабль. Игра завершается, если игрок теряет все корабли.
- Реализовано увеличение скорости и сложности игры с каждым уровнем, что можно контролировать с помощью параметров, задаваемых в настройках.

### 8. Организация структуры кода:

```
alien_invasion/
│
├── main.py            # Главный файл, запускающий игру
├── settings.py        # Настройки игры
├── ship.py            # Класс для корабля игрока
├── alien.py           # Класс для инопланетян
├── bullet.py          # Класс для пуль
├── button.py          # Класс для кнопки
├── functions.py       # Вспомогательные функции
│
└── images/            # Папка с изображениями
    ├── ship.bmp       # Изображение корабля
    └── alien.bmp      # Изображение инопланетянина
```

# Практическая работа 3 – развитие игры “Инопланетное вторжение”
## Цель работы: Дополнить базовую игру “Инопланетное вторжение” функциональностью, которая сделает игровой процесс более увлекательным и технологичным. В этой работе вы добавите звуковые эффекты, систему уровней, сохранение прогресса и интерактивные объекты с интересными механиками.

### 1. Звуковые эффекты
Для улучшения игрового опыта были добавлены звуковые эффекты, которые сопровождают ключевые события в игре. Звуки помогают сделать игру более атмосферной и динамичной.  

Подготовлены звуковые файлы в формате .wav для следующих событий:
- Выстрелы: звук выстрела снаряда.
- Уничтожение инопланетян: звук взрыва при уничтожении инопланетянина.
- Потеря жизней: звук при столкновении с инопланетянином.
- Конец игры: звук завершения игры.

Использован модуль pygame.mixer для работы с аудио.  
Звуковые эффекты инициализируются с помощью pygame.mixer.Sound("path_to_sound.wav").


### 2. Система уровней
Система уровней была реализована таким образом, что с каждым новым уровнем сложность игры увеличивается. Это достигается путем ускорения инопланетян.

Для повышения текущего уровня была добавлена функция level_up.  
Скорость движения инопланетян увеличивается с каждым уровнем с помощью множителя:  
На каждом новом уровне скорость инопланетян умножается на 1.1.  
При уничтожении всего флота инопланетян происходит переход на новый уровень:
- Пересоздается новый флот инопланетян с увеличенной скоростью.
- Все пули очищаются.

### 3. Сохранение и загрузка прогресса
Для обеспечения возможности сохранения и загрузки прогресса игры была реализована система сериализации с использованием модуля pickle.  

Данные игры (уровень, очки, жизни) сохраняются в структуру данных game_data, которая сериализуется с помощью pickle.
Для сохранения прогресса используется функция save_game(), а для загрузки — функция load_game().
Пользователь может сохранять игру с помощью клавиши S и загружать её с помощью клавиши L.

### 4. Интерактивные объекты с интересными механиками
Класс Bonus представляет бонусы, которые могут появляться на экране. Каждый бонус может быть одного из двух типов:
- life (жизнь)
- shield (щит)

Основные особенности
- Тип бонуса: Устанавливается через параметр bonus_type при создании объекта.
- Изображение: В зависимости от типа бонуса загружается соответствующее изображение.
- Позиция: Бонусы появляются в позиции пришельцев, после их уничтожения.
- Скорость: Бонусы падают вниз с фиксированной скоростью, которая задается через настройки игры.

Бонусы создаются при уничтожении пришельцев с определенной вероятностью, заданной в настройках игры (bonus_chance).  
Для этого был реализован метод create_bonus, который вызывается при попадании пули в пришельца:
```
def create_bonus(ai_settings, screen, bonuses, alien):
    """
    Создает бонус с определенной вероятностью, когда инопланетянин уничтожен.

    :param ai_settings: Настройки игры.
    :param screen: Экран, на котором отображается игра.
    :param bonuses: Группа бонусов.
    :param alien: Инопланетянин, от которого будет выпасть бонус.
    """
    # Вероятность появления бонуса
    if random.random() < ai_settings.bonus_chance:
        bonus_type = random.choice(['life', 'shield'])  # Случайный тип бонуса
        bonus = Bonus(ai_settings, screen, bonus_type, alien.rect.x, alien.rect.y)
        bonuses.add(bonus)
```

Когда бонус падает, происходит его столкновение с кораблем игрока. Это обрабатывается в функции check_bonus_collisions, где проверяется, какой тип бонуса был получен:
- life — увеличивает количество оставшихся жизней.
- shield — активирует временный защитный щит.

Когда игрок получает бонус "щита", активируется специальный флаг shield_active, который позволяет игроку игнорировать столкновения с пришельцами.  
Также для щита отслеживается его продолжительность с помощью таймера.

### 5. Сборка игры в исполняемый файлен
Структура кода:
```
alien_invasion/
│
├── main.py              # Главный файл, запускающий игру
├── settings.py          # Настройки игры (размер экрана, параметры скорости и т.д.)
├── ship.py              # Класс для корабля игрока
├── alien.py             # Класс для пришельцев
├── bullet.py            # Класс для пуль
├── button.py            # Класс для кнопки
├── functions.py         # Вспомогательные функции (для создания флота, проверки столкновений и т.д.)
├── bonus.py             # Класс для отслеживания статистики игры (очки, жизни, уровень и т.д.)
├── stats.py             # Класс для бонусов (жизнь, щит)
│
├── sounds/              # Папка со звуками
│   ├── laser.wav        # Звук выстрела
│   ├── explosion.wav    # Звук взрыва пришельца
│   ├── life_lost.wav    # Звук потери жизни
│   └── game_over.wav    # Звук окончания игры
│
└── images/                # Папка с изображениями
    ├── spaceship.bmp      # Изображение корабля
    ├── alienship.bmp      # Изображение прищельцев
    ├── bonus_life.bmp     # Изображение бонуса "жизнь"
    └── bonus_shield.bmp   # Изображение бонуса "щит"
```
В коде используются относительные пути для загрузки файлов. Для этого была создана функция *resource_path*
```
def resource_path(relative_path):
    """Определяет абсолютный путь к ресурсу, независимо от того, где запущен файл."""
    try:
        # Для PyInstaller
        base_path = sys._MEIPASS
    except Exception:
        # Для нормальной работы в разработке
        base_path = os.path.abspath(".")
    return os.path.join(base_path, relative_path)
```

Установка PyInstaller  
```
pip install pyinstaller
```

**Создание исполняемых файлов**  
Для каждой операционной системы создан отдельный скрипт сборки.  

• Windows  
*build_windows.bat*  
```
@echo off
pyinstaller --onefile --add-data "sounds;sounds" --add-data "images;images" main.py
pause
```

• macOS  
*build_macos.sh*  
```
#!/bin/bash
pyinstaller --onefile --add-data "sounds:sounds" --add-data "images:images" main.py
```
Сделайте скрипт исполняемым и запустите его:
```
chmod +x build_macos.sh
./build_macos.sh
```

• Linux  
*build_linux.sh*  
```
#!/bin/bash
pyinstaller --onefile --add-data "sounds:sounds" --add-data "images:images" main.py
```
Сделайте скрипт исполняемым и запустите его:
```
chmod +x build_linux.sh
./build_linux.sh
```

В итоге в папке dist создан иполняемый файл *main.exe* игры для Windows
